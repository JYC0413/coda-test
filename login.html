<html lang="en">
    <head>
        <title>Register</title>
	<script>
document.addEventListener("DOMContentLoaded", function(event) { 
  var form = document.getElementById('form');
  form.addEventListener('submit', function(e){
    e.preventDefault();
    login(new FormData(form));
  });
});

function login(formData) {
  console.log("formData is:");
  console.log(JSON.stringify(Object.fromEntries(formData)));
  fetch("https://code.flows.network/webhook/mGf4HLHKeePxFzDHk7D1/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(Object.fromEntries(formData)),

  }).then(function(response) { 
    return response.json();

  }).then(function(data) {
    console.log(data);
    if (data['status']) {
      window.location.href = "profile.html";
    } else {
      var em = document.getElementById("errMsg");
      em.style.display = "block";
    }

  }).catch(error => {
    console.error('Error:', error);
    var em = document.getElementById("errMsg");
    em.style.display = "block";
  }); 
}
	</script>
    </head>

    <body>
        <div id="errMsg" style="color:red; display:none">Sorry, there is a problem with your login</div>
        <form id="form">
            <label for="username">Username</label>
            <input type="text" name="username" id="username" />

            <label for="password">Password</label>
            <input type="password" name="password" id="password" />

            <button type="submit">Submit</button>
        </form>
    </body>
</html>
